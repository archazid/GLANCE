# Enhancing GLANCE: A Replication and Extension Kit for Line-Level Defect Prediction

## Title: Enhancing Heuristic-Based Defect Prediction: Improving Line-Level Metrics and File-Level Classification for GLANCE

This repository contains the replication kit that extends the original research by Guo et al., "Code-line-level bugginess identification: How far have we come, and how far have we yet to go?".

This project introduces several new models that build upon the original **GLANCE** framework, aiming to improve its performance through enhanced line-level metrics and a more powerful file-level classifier.

- [`CLBI`](https://github.com/Naplues/CLBI/) the original **GLANCE** framework by Guo et al. (2023).

- [`BugDet`](https://github.com/Naplues/BugDet/) the public dataset provided by Guo et al. (2023).

---

## 1. Directory Structure

-   **`/src/`**: Contains all Python source code for the models and utilities.
-   **`/src/models/`**: Contains the specific implementations for all baseline and proposed models.
-   **`/scripts/`**: Contains the standalone scripts for model performance evaluation.

---

## 2. Environment Setup

This project uses Conda to manage its dependencies. To ensure reproducibility, all required packages are listed in the `environment.yml` file.

### **Prerequisites**
- You must have a Conda distribution (Anaconda or Miniconda) installed on your system.

### **Installation Steps**

1.  **Navigate to the Repository Root:**
    Open a terminal or command prompt and change your directory to the root of this project where the `environment.yml` file is located.

2.  **Create the Conda Environment:**
    Run the following command to create the environment from the file. This command will read the `environment.yml` file, create a new environment named `codefect`, and install all the specified packages.

    ```bash
    conda env create -f environment.yml
    ```

3.  **Activate the Environment:**
    Before running any scripts, you must activate the newly created environment.

    ```bash
    conda activate codefect
    ```
    Once activated, your terminal prompt should be prefixed with `(codefect)`. You are now ready to run the experiments.

---

## 3. Execution Commands

All experiments can be executed from the root directory using the `main.py` script, which runs the cross-release prediction scenario for the specified model.

**Command:**
`python main.py [model_name]`

Where `[model_name]` is one of the models listed in the `MODEL_DICT` within `main.py`.

### **Usage Examples:**

**To run a baseline model:**
`python main.py GLANCE-LR`

**To run one of the newly proposed models:**
`python main.py GlancePlus_File`
`python main.py GlancePlus_Line_LR`
`python main.py GlancePlus`

---

## 4. Studied Approaches

This research evaluates the original GLANCE baselines against a series of newly proposed models.

| Approach Category | Model Name | Source File | Description |
| :--- | :--- | :--- | :--- |
| **Baselines** | `GLANCE-MD`, `GLANCE-EA`, `GLANCE-LR` | `src/models/glance.py` | The original heuristic models from Guo et al. (2023). |
| **Task 1 Enhancement** | `GlancePlus_Line_LR` | `src/models/glance_plus_line.py` | Enhances **line-level metrics** (CCS, AW-NFC, SCC) with the original LR file-level classifier. |
| **Task 2 Enhancement** | `GlancePlus_File` | `src/models/glance_plus_file.py` | Enhances the **file-level classifier** to LightGBM with lexical-only features. |
| **Task 3 (Combined)** | `GlancePlus` | `src/models/glance_plus.py` | **Combines enhancements**: LightGBM (lexical) classifier with enhanced line-level metrics. |

---

## 5. Analysis of Results

After running the experiments using `main.py`, the final summary tables and figures can be generated by executing the analysis script:

**Command:**
`python scripts/analyze_results.py`

This script will process the raw output files and generate a comprehensive comparison table named `summary_overall_comparison.csv` in the `/exps/results/` directory.
